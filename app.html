<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BD Manager - Lyc√©e Makepe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="assets/favicon.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="container py-4 py-md-5">
        <!-- Bouton Retour fixe en haut gauche -->
        <button class="btn btn-outline-orange position-fixed top-0 start-0 m-3" style="z-index: 1000;" onclick="window.location.href = 'index.html'">
            ‚Üê Retour √† la connexion
        </button>

        <button id="exportBtn" class="btn btn-orange position-fixed top-0 end-0 m-3" style="z-index: 1000;" onclick="exportToPDF()">
            üìÑ Exporter en PDF
        </button>

        <!-- Bouton Enregistrer fixe en bas -->
        <button class="btn btn-orange position-fixed bottom-0 end-0 m-3" style="z-index: 1000;" onclick="manualSave()">
            üíæ Enregistrer les changements
        </button>

        <header class="text-center mb-5" data-aos="fade-down">
            <img src="assets/logo.png" alt="Logo Lyc√©e Makepe" class="img-fluid mb-4 rounded" style="max-height: 180px; max-width: 90%;">
            <h1 class="display-5 display-md-3 fw-bold text-orange">Lyc√©e de Makepe</h1>
            <h2 class="display-6 display-md-5 text-dark">BD Manager - Club Dessin</h2>
            <p class="lead text-dark">Superviseur : M. NGUEWO</p>
        </header>

        <!-- Avancement BD -->
        <section class="card p-4 mb-5" data-aos="fade-up">
            <h2 class="text-center mb-4 text-orange fw-bold fs-4">Avancement de la Bande Dessin√©e</h2>
            <div class="row g-3">
                <div class="col-12 col-md-4"><input type="number" id="totalPages" class="form-control form-control-lg" min="1" value="50"></div>
                <div class="col-12 col-md-4"><input type="number" id="drawnPages" class="form-control form-control-lg" min="0" value="0"></div>
                <div class="col-12 col-md-4"><input type="number" id="digitizedPages" class="form-control form-control-lg" min="0" value="0"></div>
            </div>
            <div class="row mt-3 text-center text-dark">
                <div class="col-12 col-md-4"><small>Total pages pr√©vues</small></div>
                <div class="col-12 col-md-4"><small>Pages dessin√©es</small></div>
                <div class="col-12 col-md-4"><small>Pages num√©ris√©es</small></div>
            </div>
            <div class="mt-4">
                <div class="progress" style="height: 40px;">
                    <div id="progressBar" class="progress-bar" style="width:0%">0%</div>
                </div>
                <div class="progress-info" id="progressText">0 pages dessin√©es | 0 pages num√©ris√©es / 50 pr√©vues</div>
            </div>
        </section>

        <!-- Membres -->
        <section class="card p-4 mb-5" data-aos="fade-up" data-aos-delay="100">
            <h2 class="text-center mb-4 text-orange fw-bold fs-4">Membres du Club</h2>
            <div class="row g-3 mb-3">
                <div class="col-12 col-md-4"><input type="text" id="memberName" class="form-control form-control-lg" placeholder="Nom du membre"></div>
                <div class="col-12 col-md-3"><input type="tel" id="memberPhone" class="form-control form-control-lg" placeholder="T√©l√©phone (optionnel)"></div>
                <div class="col-12 col-md-3">
                    <select id="memberRole" class="form-select form-select-lg">
                        <option>Dessin</option>
                        <option>Num√©risation</option>
                        <option>Les deux</option>
                        <option>Autre</option>
                    </select>
                </div>
                <div class="col-12 col-md-2"><button class="btn btn-orange btn-lg w-100" onclick="addMember()">Ajouter</button></div>
            </div>
            <ul id="membersList" class="list-group"></ul>
        </section>

        <!-- T√¢ches Assign√©es -->
        <section class="card p-4 mb-5" data-aos="fade-up" data-aos-delay="200">
            <h2 class="text-center mb-4 text-orange fw-bold fs-4">T√¢ches Assign√©es</h2>
            <div class="row g-3 mb-3">
                <div class="col-12 col-md-5"><input type="text" id="taskDesc" class="form-control form-control-lg" placeholder="Description t√¢che"></div>
                <div class="col-12 col-md-3"><select id="taskMember" class="form-select form-select-lg"><option value="">Sans responsable</option></select></div>
                <div class="col-12 col-md-2"><input type="date" id="taskDeadline" class="form-control form-control-lg"></div>
                <div class="col-12 col-md-2">
                    <select id="taskStatus" class="form-select form-select-lg">
                        <option>To Do</option>
                        <option>In Progress</option>
                        <option>Done</option>
                    </select>
                </div>
                <div class="col-12"><button class="btn btn-orange btn-lg w-100" onclick="addTask()">Ajouter T√¢che</button></div>
            </div>
            <div class="btn-group w-100 mb-3">
                <button class="btn btn-outline-orange flex-fill" onclick="filterTasks('all')">Toutes</button>
                <button class="btn btn-outline-orange flex-fill" onclick="filterTasks('To Do')">To Do</button>
                <button class="btn btn-outline-orange flex-fill" onclick="filterTasks('In Progress')">In Progress</button>
                <button class="btn btn-outline-orange flex-fill" onclick="filterTasks('Done')">Done</button>
            </div>
            <ul id="tasksList" class="list-group"></ul>
        </section>

        <!-- Objectifs du Club -->
        <section class="card p-4 mb-5" data-aos="fade-up" data-aos-delay="300">
            <h2 class="text-center mb-4 text-orange fw-bold fs-4">Objectifs du Club</h2>
            <div class="input-group mb-3">
                <input type="text" id="goalText" class="form-control form-control-lg" placeholder="Nouvel objectif">
                <button class="btn btn-orange btn-lg" onclick="addGoal()">Ajouter</button>
            </div>
            <ul id="goalsList" class="list-group"></ul>
        </section>

        <!-- Mat√©riel Disponible -->
        <section class="card p-4 mb-5" data-aos="fade-up" data-aos-delay="400">
            <h2 class="text-center mb-4 text-orange fw-bold fs-4">Mat√©riel Disponible</h2>
            <div class="input-group mb-3">
                <input type="text" id="materialText" class="form-control form-control-lg" placeholder="Ex: tablette graphique">
                <button class="btn btn-orange btn-lg" onclick="addMaterial()">Ajouter</button>
            </div>
            <ul id="materialsList" class="list-group"></ul>
        </section>

        <!-- Galerie Pages BD -->
        <section class="card p-4 mb-5" data-aos="fade-up" data-aos-delay="500">
            <h2 class="text-center mb-4 text-orange fw-bold fs-4">Galerie Pages BD</h2>
            <div class="mb-3">
                <input type="file" id="pageUpload" class="form-control form-control-lg" accept="image/*" multiple>
                <button class="btn btn-orange btn-lg mt-2 w-100" onclick="uploadPages()">Uploader les pages</button>
            </div>
            <div id="gallery" class="row g-3"></div>
        </section>
    </div>

    <footer class="text-center py-4 text-dark">
        <p>BD Manager ¬© 2026 - Cr√©√© par NGANA KEUMO PRINCE<br>
        üìû +237 652382723 | ‚úâÔ∏è nganakeumo@gmail.com</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>AOS.init({duration: 800, once: true});</script>
    <script src="script.js"></script>

    <script>
        function exportToPDF() {
            document.getElementById('exportBtn').style.display = 'none';
            const element = document.body;
            const opt = {
                margin: 10,
                filename: 'Rapport_BD_Club_Makepe.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save().then(() => {
                document.getElementById('exportBtn').style.display = 'block';
            });
        }
    </script>
</body>
</html>
